í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°
===========================
# ğŸ“˜ Controller ì¸í„°í˜ì´ìŠ¤
> Controller ì¸í„°í˜ì´ìŠ¤ëŠ” @Controller ì• ë…¸í…Œì´ì…˜ê³¼ëŠ” ì „í˜€ ë‹¤ë¥´ë‹¤.
   
ê³¼ê±° ë²„ì „ ìŠ¤í”„ë§ ì»¨íŠ¸ë¡¤ëŸ¬
```java  
org.springframework.web.servlet.mvc.Controller
```  
```java
@FunctionalInterface
public interface Controller {

	@Nullable
	ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception;

}
```
ìŠ¤í”„ë§ë„ ì²˜ìŒì—ëŠ” ì´ëŸ° ë”±ë”±í•œ í˜•ì‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œê³µí–ˆë‹¤.
   
**Controller ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ì²´**   
```java
// ìŠ¤í”„ë§ ë¹ˆ ì´ë¦„ì„ URLì— ë§ì¶”ì—ˆë‹¤.
@Component("/springmvc/old-controller")
public class OldController implements Controller {

    @Override
    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
        System.out.println("OldController.handleRequest");
        return null;
    }

}
```
* **@Component :** `/springmvc/old-controller` ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ **ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡**   
* **ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ URLì„ ë§¤í•‘í•  ê²ƒì´ë‹¤.**   

**ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì–´ë–»ê²Œ í˜¸ì¶œë  ìˆ˜ ìˆì„ê¹Œ? ğŸ¤”**   
   
![spring-mvc](https://user-images.githubusercontent.com/50267433/126873936-e90358e2-10ac-4b6e-9343-6d0c20c523fd.PNG)   
  
ì»¨íŠ¸ë¡¤ëŸ¬ê°€ í˜¸ì¶œë˜ë ¤ë©´ ë‹¤ìŒ 2ê°€ì§€ê°€ í•„ìš”í•˜ë‹¤.   
    
**âœ” HandlerMapping(í•¸ë“¤ëŸ¬ ë§¤í•‘)**
* í•¸ë“¤ëŸ¬ ë§¤í•‘ì—ì„œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
* **ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ì´ í•„ìš”í•˜ë‹¤.**    
     
**âœ” HandlerAdapter(í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°)**  
* í•¸ë“¤ëŸ¬ ë§¤í•‘ì„ í†µí•´ì„œ ì°¾ì€ í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ê°€ í•„ìš”í•˜ë‹¤.   
* **Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ì°¾ê³  ì‹¤í–‰í•´ì•¼ í•œë‹¤.**   
   
ìŠ¤í”„ë§ì€ ì´ë¯¸ í•„ìš”í•œ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ëŒ€ë¶€ë¶„ êµ¬í˜„í•´ë‘ì—ˆë‹¤.   
ê°œë°œìê°€ ì§ì ‘ í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë¥¼ ë§Œë“œëŠ” ì¼ì€ ê±°ì˜ ì—†ë‹¤.   
  
## ğŸ“– í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° í”„ë¡œì„¸ìŠ¤    
ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ ë“±ë¡í•˜ëŠ” í•¸ë“¤ëŸ¬ ë§¤í•‘ê³¼ í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°    
(ì‹¤ì œë¡œëŠ” ë” ë§ì§€ë§Œ, ì¤‘ìš”í•œ ë¶€ë¶„ ìœ„ì£¼ë¡œ ì„¤ëª…í•˜ê¸° ìœ„í•´ ì¼ë¶€ ìƒëµ)

**HandlerMapping**
```java
0 = RequestMappingHandlerMapping   : ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMappingì—ì„œ ì‚¬ìš©
1 = BeanNameUrlHandlerMapping      : ìŠ¤í”„ë§ ë¹ˆì˜ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.
```
   
**HandlerAdapter**   
```java
0 = RequestMappingHandlerAdapter   : ì• ë…¸í…Œì´ì…˜ ê¸°ë°˜ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ì¸ @RequestMappingì—ì„œ ì‚¬ìš©
1 = HttpRequestHandlerAdapter      : HttpRequestHandler ì²˜ë¦¬
2 = SimpleControllerHandlerAdapter : Controller ì¸í„°í˜ì´ìŠ¤(ì• ë…¸í…Œì´ì…˜X, ê³¼ê±°ì— ì‚¬ìš©) ì²˜ë¦¬
```
í•¸ë“¤ëŸ¬ ë§¤í•‘ë„, í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„°ë„ ëª¨ë‘ ìˆœì„œëŒ€ë¡œ ì°¾ê³  ë§Œì•½ ì—†ìœ¼ë©´ ë‹¤ìŒ ìˆœì„œë¡œ ë„˜ì–´ê°„ë‹¤.      
urlì„ ê¸°ì¤€ìœ¼ë¡œ `RequestMappingHandlerMapping`ì„ ì°¾ì•˜ëŠ”ë° ì—†ê¸°ì—     
ë‹¤ìŒ ìš°ì„  ìˆœìœ„ì¸ `BeanNameUrlHandlerMapping`ì—ì„œ ì°¾ì•„ì„œ í•¸ë“œëŸ¬ë¥¼ ê°€ì ¸ì™”ë˜ ê²ƒì´ë‹¤.   
   
**1. í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ì¡°íšŒ**  
1. `HandlerMapping` ì„ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•´ì„œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ”ë‹¤.       
2. ì´ ê²½ìš° ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì—         
   ì´ë¦„ ê·¸ëŒ€ë¡œ ë¹ˆ ì´ë¦„ìœ¼ë¡œ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì•„ì£¼ëŠ” `BeanNameUrlHandlerMapping` ê°€ ì‹¤í–‰ì— ì„±ê³µí•˜ê³      
   í•¸ë“¤ëŸ¬ì¸ `OldController` ë¥¼ ë°˜í™˜í•œë‹¤.     
   
**2. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì¡°íšŒ**
1. `HandlerAdapter` ì˜ `supports()` ë¥¼ ìˆœì„œëŒ€ë¡œ í˜¸ì¶œí•œë‹¤.
2. `SimpleControllerHandlerAdapter` ê°€ Controller ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§€ì›í•˜ë¯€ë¡œ ëŒ€ìƒì´ ëœë‹¤.
   
**3. í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ì‹¤í–‰**   
1. ë””ìŠ¤íŒ¨ì²˜ ì„œë¸”ë¦¿ì´ ì¡°íšŒí•œ `SimpleControllerHandlerAdapter` ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í•¸ë“¤ëŸ¬ ì •ë³´ë„ í•¨ê»˜ ë„˜ê²¨ì¤€ë‹¤.       
2. `SimpleControllerHandlerAdapter` ëŠ” í•¸ë“¤ëŸ¬ì¸ `OldController` ë¥¼ ë‚´ë¶€ì—ì„œ ì‹¤í–‰í•˜ê³ , ê·¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.    
      
**ì •ë¦¬ - OldController í•¸ë“¤ëŸ¬ë§¤í•‘, ì–´ëŒ‘í„°**         
OldController ë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ì‚¬ìš©ëœ ê°ì²´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.   
`HandlerMapping = BeanNameUrlHandlerMapping`    
`HandlerAdapter = SimpleControllerHandlerAdapter`    

# HttpRequestHandler ì¸í„°í˜ì´ìŠ¤
```java
@FunctionalInterface
public interface HttpRequestHandler {

	/**
	 * Process the given request, generating a response.
	 * @param request current HTTP request
	 * @param response current HTTP response
	 * @throws ServletException in case of general errors
	 * @throws IOException in case of I/O errors
	 */
	void handleRequest(HttpServletRequest request, HttpServletResponse response)
			throws ServletException, IOException;

}
```
```java
@Component("/springmvc/request-handler")
public class MyHttpRequestHandler implements HttpRequestHandler {
    
    @Override
    public void handleRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("MyHttpRequestHandler.handleRequest");
    }
    
}
```

```java

```
