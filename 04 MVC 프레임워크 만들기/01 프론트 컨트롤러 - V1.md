í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ - V1
=====================
**FrontController ë„ì… ì „**         
![generic-controller-request](https://user-images.githubusercontent.com/50267433/126643365-d51086e7-9c5f-4244-9323-2d2fec1486d9.PNG)         
        
`FrontController`ê°€ ë„ì…ë˜ê¸° ì „ì—ëŠ” ê°ê°ì˜ Controller ì— ê³µí†µëœ ì½”ë“œë“¤ì´ ë§ë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.       
ì´ë¡œ ì¸í•´, ì¤‘ë³µì´ ë°œìƒí•˜ê³  ì½”ë“œì˜ ë³€ê²½ì´ í•„ìš”í•  ë•Œ ìœ ì§€ë³´ìˆ˜ì„±ì´ ë–¨ì–´ì§„ë‹¤ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.         
     
**FrontController ë„ì… í›„**          
![front-controller](https://user-images.githubusercontent.com/50267433/126643370-68b2339b-dec3-42d2-8ddf-8ab3da816c9c.png)      
            
ê° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì•ë‹¨ì— `FrontController`ë¥¼ ë‘ì–´ ê³µí†µ ë¡œì§ì„ `FrontController`ì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ í•œë‹¤.              
           
**FrontController íŒ¨í„´ íŠ¹ì§•**       
* ì…êµ¬ë¥¼ í•˜ë‚˜ë¡œ
* `FrontController` í•˜ë‚˜ë¡œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ë°›ìŒ               
* `FrontController`ê°€ ìš”ì²­ì— ë§ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì„œ í˜¸ì¶œ                          
* ê³µí†µ ì²˜ë¦¬ ê°€ëŠ¥ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ì„œë¸”ë¦¿ì„ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ        
                  
**ìŠ¤í”„ë§ ì›¹ MVCì™€ FrontController**                 
ìŠ¤í”„ë§ ì›¹ MVCì˜ í•µì‹¬ë„ ë°”ë¡œ **FrontController ë‹¤.**                    
ìŠ¤í”„ë§ ì›¹ MVCì˜ **DispatcherServletì´ FrontController íŒ¨í„´**ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆë‹¤.           
     
# ğŸ“˜ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ ë„ì… - V1  
   
![v1](https://user-images.githubusercontent.com/50267433/126643978-f306cf6b-04f4-4682-a36a-2d59834d0012.PNG)   
      
í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë„ì…í•œ MVC êµ¬ì¡°ëŠ” ìœ„ì™€ ê°™ë‹¤.               
ëŒ€í‘œì ì¸ ì°¨ì´ì ìœ¼ë¡œëŠ” **ìš”ì²­ URLì„ í†µí•´ ì•Œë§ì€ í•¸ë“¤ëŸ¬(Controller)ë¥¼ ì°¾ì•„ì™€ì„œ ì‹¤í–‰ì„ ì‹œí‚¨ë‹¤.**           
       
ì´ëŸ¬í•œ ê³¼ì •ì—ì„œ **URLê³¼ ë§¤í•‘ëœ í•¸ë“¤ëŸ¬ë¥¼ ì €ì¥í•˜ëŠ” ê³µê°„ì„ `í•¸ë“¤ëŸ¬ ë§¤í•‘`** ì´ë¼ ë¶€ë¥´ê³          
í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œ ë¶€í„° **ì•Œë§ëŠ” í•¸ë“¤ëŸ¬ë¥¼ ì°¾ëŠ” ê³¼ì •ì„ `í•¸ë“¤ëŸ¬ ì¡°íšŒ`** ë¼ê³  ë¶€ë¥¸ë‹¤.         
ì¦‰, **í•¸ë“¤ëŸ¬ ë§¤í•‘ìœ¼ë¡œë¶€í„° í•¸ë“¤ëŸ¬ë¥¼ ì¡°íšŒí•´ì„œ ì•Œë§ëŠ” í•¸ë“¤ëŸ¬(Controller)ë¥¼ ì‹¤í–‰í•˜ëŠ” ê³¼ì •ì´ë¼ ë³´ë©´ ëœë‹¤.**        

## ğŸ“– FrontController 
```java
@WebServlet(name = "frontControllerServletV1", urlPatterns = "/frontcontroller/v1/*")
public class FrontControllerServletV1 extends HttpServlet {
    private Map<String, ControllerV1> controllerMap = new HashMap<>();
    
    public FrontControllerServletV1() {
        controllerMap.put("/front-controller/v1/members/new-form", new MemberFormControllerV1());
        controllerMap.put("/front-controller/v1/members/save", new MemberSaveControllerV1());
        controllerMap.put("/front-controller/v1/members", new MemberListControllerV1());
    }
 
    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String requestURI = request.getRequestURI();
        ControllerV1 controller = controllerMap.get(requestURI);
        if (controller == null) {
           response.setStatus(HttpServletResponse.SC_NOT_FOUND);
           return;
        }
        controller.process(request, response);
    }
}
```   
`Map<String, ControllerV1> controllerMap`ì€ ë‹¤ì–‘í•œ Controller ê°ì²´ë¥¼ ì €ì¥í•˜ëŠ” **í•¸ë“¤ëŸ¬ ë§¤í•‘**ì´ë‹¤.         
ê·¸ë¦¬ê³  `controllerMap.get(requestURI);`
   
## Front Controller ë¶„ì„     
### urlPatterns   
**`urlPatterns = "/front-controller/v1/*"` :**              
* `/front-controller/v1` ë¥¼ í¬í•¨í•œ í•˜ìœ„ ëª¨ë“  ìš”ì²­ì€ ì´ ì„œë¸”ë¦¿ì—ì„œ ë°›ì•„ë“¤ì¸ë‹¤.           
* ì˜ˆ) `/front-controller/v1` , `/front-controller/v1/a` , `/front-controller/v1/a/b`          
   
### controllerMap    
* **key :** ë§¤í•‘ URL  
* **value :** í˜¸ì¶œë  ì»¨íŠ¸ë¡¤ëŸ¬   
   
### service()
ë¨¼ì € `requestURI`ë¥¼ ì¡°íšŒí•´ì„œ ì‹¤ì œ **í˜¸ì¶œí•  ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ `controllerMap`ì—ì„œ ì°¾ëŠ”ë‹¤.**            
ë§Œì•½ ì—†ë‹¤ë©´ **404(SC_NOT_FOUND) ìƒíƒœ ì½”ë“œë¥¼ ë°˜í™˜í•œë‹¤.**             
ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ê³  `controller.process(request, response);`ì„ í˜¸ì¶œí•´ì„œ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‹¤í–‰í•œë‹¤.          



## ğŸ“– Controller ì¸í„°í˜ì´ìŠ¤ 
```java
public interface ControllerV1 {
    void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException;
}
```   
FrontControllerì—ì„œ **ë‹¤ì–‘í•œ Controllerë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ê³µí†µ ê·œì•½ì¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë„ì…í•œë‹¤.**                     
ì¦‰, FrontControllerì—ì„œ ì¸í„°í˜ì´ìŠ¤ ì°¸ì¡°ë¥¼ í†µí•´ êµ¬í˜„ê³¼ ê´€ê³„ì—†ì´ ë¡œì§ì˜ ì¼ê´€ì„±ì„ ê°€ì§€ê²Œë” ë§Œë“¤ì—ˆë‹¤.                  
        
## ğŸ“– Controller êµ¬í˜„ì²´ - ë‹¨ìˆœ ì´ë™   
```java
public class MemberFormControllerV1 implements ControllerV1 {
    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String viewPath = "/WEB-INF/views/new-form.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```
  
## ğŸ“– Controller êµ¬í˜„ì²´ - íšŒì› ì €ì¥
```java
public class MemberSaveControllerV1 implements ControllerV1 {
     private MemberRepository memberRepository = MemberRepository.getInstance();
     
     @Override
     public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
         // ë©¤ë²„ ì €ì¥ 
         String username = request.getParameter("username");
         int age = Integer.parseInt(request.getParameter("age"));
         Member member = new Member(username, age);
         memberRepository.save(member);
         
         // Modelì— ë°ì´í„° ë³´ê´€   
         request.setAttribute("member", member);
         
         // Viewë¡œ ë°ì´í„° íë¦„ ì´ë™   
         String viewPath = "/WEB-INF/views/save-result.jsp";
         RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
         dispatcher.forward(request, response);
    }
}
```

## ğŸ“– Controller êµ¬í˜„ì²´ - íšŒì› ëª©ë¡ ì¡°íšŒ  
```java
public class MemberListControllerV1 implements ControllerV1 {
    private MemberRepository memberRepository = MemberRepository.getInstance();
    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // ëª©ë¡ ì¡°íšŒ  
        List<Member> members = memberRepository.findAll();
        
        // Modelì— ë°ì´í„° ë³´ê´€    
        request.setAttribute("members", members);
        
        // Viewë¡œ ë°ì´í„° íë¦„ ì´ë™   
        String viewPath = "/WEB-INF/views/members.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```




