μ”μ²­ λ§¤ν•‘ ν—¨λ“¤λ¬ μ–΄λν„° κµ¬μ΅°
=============================   
**HTTP λ©”μ‹μ§€ μ»¨λ²„ν„°λ” μ¤ν”„λ§ MVC μ–΄λ””μ―¤μ—μ„ μ‚¬μ©λλ” κ²ƒμΌκΉ? π¤”**      
HTTP λ©”μ‹μ§€ μ»¨λ²„ν„° μ‚¬μ© μ„μΉλ¥Ό μ•κΈ° μ „μ— **`ArgumentResolver`μ™€ `ReturnValueHandler`μ— λ€ν•΄μ„ μ•κ³  κ°€μ**      
    
![mvc-adapter](https://user-images.githubusercontent.com/50267433/128370135-991bf2dd-b5c9-4a62-a79d-8db95e5a9299.PNG)    
![request-handler-adapter](https://user-images.githubusercontent.com/50267433/128369947-d28f62a3-39a5-4bad-9180-03d6e3731142.PNG)     
   
# SpringMVC κµ¬μ΅°     
λ¨λ“  λΉ„λ°€μ€ **μ–΄λ…Έν…μ΄μ… κΈ°λ°μ μ»¨νΈλ΅¤λ¬**     
μ¦‰, **`@RequestMapping`μ„ μ²λ¦¬ν•λ” ν•Έλ“¤λ¬ μ–΄λ‘ν„°μΈ `RequestMappingHandlerAdapter`μ— μλ‹¤.**        

## ArgumentResolver
**μ–΄λ…Έν…μ΄μ… κΈ°λ°μ μ»¨νΈλ΅¤λ¬**λ” λ§¤μ° λ‹¤μ–‘ν• νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μμ—λ‹¤.      
    
* HttpServletRequest
* HttpEntity 
* Model
* @μ–΄λ…Έν…μ΄μ…  
* κΈ°νƒ€ λ“±λ“±...  
        
μ΄λ ‡κ² **νλΌλ―Έν„°λ¥Ό μ μ—°ν•κ² μ²λ¦¬ν•  μ μλ” μ΄μ λ” `ArgumentResolver` λ•λ¶„μ΄λ‹¤.**           
`RequestMappingHandlerAdaptor` λ” **ArgumentResolverλ¥Ό νΈμ¶ν•΄μ„**      
**μ»¨νΈλ΅¤λ¬(ν•Έλ“¤λ¬)κ°€ ν•„μ”λ΅ ν•λ” λ‹¤μ–‘ν• νλΌλ―Έν„°μ κ°’(κ°μ²΄)μ„ `μƒμ„±`ν•λ‹¤.**    
κ·Έλ¦¬κ³  μ΄λ ‡κ² **νλ¦¬λ―Έν„°μ κ°’μ΄ λ¨λ‘ μ¤€λΉ„λλ©΄ μ»¨νΈλ΅¤λ¬λ¥Ό νΈμ¶ν•λ©΄μ„ κ°’μ„ λ„κ²¨μ¤€λ‹¤.**           
   
**μ •λ¦¬**    
1. RequestMappingHandlerAdaptorλ” **Handlerκ°€ ν•„μ”λ΅ν•λ” νλΌλ―Έν„° κ°’μ„ νμ•…ν•λ‹¤.**   
2. Handlerκ°€ ν•„μ”λ΅ν•λ” **νλΌλ―Έν„° κ°’μ΄ μ—†μ„ κ²½μ° ArgumentResolver λ©λ΅μ„ μνν•λ©΄μ„ μƒμ„± κ°€λ¥ μ—¬λ¶€λ¥Ό λ¬»λ”λ‹¤.**      
3. **νλΌλ―Έν„° κ°’μ„ μƒμ„±ν•΄μ¤„ `ArgumentResolver`λ¥Ό μ°ΎμΌλ©΄ μƒμ„±μ„ μλΆ°ν•λ‹¤.**   
4. `ArgumentResolver`ν†µν•΄ λ°ν™λ νλΌλ―Έν„° κ°’λ“¤μ„ ν†µν•΄ **μ‹¤μ  ν•Έλ“¤λ¬λ¥Ό νΈμ¶ν•λ‹¤.**       

μ¤ν”„λ§μ€ 30κ°κ°€ λ„λ” ArgumentResolver λ¥Ό κΈ°λ³ΈμΌλ΅ μ κ³µν•λ‹¤.    

* κ°€λ¥ν• νλΌλ―Έν„° λ©λ΅μ€ [κ³µμ‹ λ©”λ‰΄μ–Ό](https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-annarguments)μ—μ„ ν™•μΈν•  μ μλ‹¤.    
* μ •ν™•νλ” `HandlerMethodArgumentResolver`μΈλ° μ¤„μ—¬μ„ `ArgumentResolver` λΌκ³  λ¶€λ¥Έλ‹¤.    



```java
public interface HandlerMethodArgumentResolver {

	boolean supportsParameter(MethodParameter parameter);
    
	@Nullable
	Object resolveArgument(MethodParameter parameter, @Nullable ModelAndViewContainer mavContainer,
			NativeWebRequest webRequest, @Nullable WebDataBinderFactory binderFactory) throws Exception;
            
}
```

**λ™μ‘ λ°©μ‹*    
1. ArgumentResolver μ supportsParameter() λ¥Ό νΈμ¶ν•΄μ„ ν•΄λ‹Ή νλΌλ―Έν„°λ¥Ό μ§€μ›ν•λ”μ§€ μ²΄ν¬ν•λ‹¤.   
2. μ§€μ› κ°€λ¥ν•λ©΄ `resolveArgument()`λ¥Ό νΈμ¶ν•΄μ„ μ‹¤μ  κ°μ²΄λ¥Ό μƒμ„±ν•λ‹¤.    
3. κ·Έλ¦¬κ³  μ΄λ ‡κ² μƒμ„±λ κ°μ²΄κ°€ μ»¨νΈλ΅¤λ¬ νΈμ¶μ‹ λ„μ–΄κ°„λ‹¤.   
       
**μ›ν•λ‹¤λ©΄ μ§μ ‘ μΈν„°νμ΄μ¤λ¥Ό ν™•μ¥ν•΄μ„ μ›ν•λ” ArgumentResolver λ¥Ό λ§λ“¤ μλ„ μλ‹¤.([μ°Έκ³ ](https://jaehun2841.github.io/2018/08/10/2018-08-10-spring-argument-resolver/#custom-argument-resolver-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0))**       
     
     
## ReturnValueHandler
HandlerMethodReturnValueHandler λ¥Ό μ¤„μ—¬μ„ ReturnValueHandle λΌ λ¶€λ¥Έλ‹¤.
ArgumentResolver μ™€ λΉ„μ·ν•λ°, μ΄κ²ƒμ€ μ‘λ‹µ κ°’μ„ λ³€ν™ν•κ³  μ²λ¦¬ν•λ‹¤.
μ»¨νΈλ΅¤λ¬μ—μ„ StringμΌλ΅ λ·° μ΄λ¦„μ„ λ°ν™ν•΄λ„, λ™μ‘ν•λ” μ΄μ κ°€ λ°”λ΅ ReturnValueHandler λ•λ¶„μ΄λ‹¤.
μ–΄λ–¤ μΆ…λ¥λ“¤μ΄ μλ”μ§€ μ‚΄μ§ μ½”λ“λ΅ ν™•μΈλ§ ν•΄λ³΄μ.
μ¤ν”„λ§μ€ 10μ—¬κ°κ°€ λ„λ” ReturnValueHandler λ¥Ό μ§€μ›ν•λ‹¤.
μ) ModelAndView , @ResponseBody , HttpEntity , String
> μ°Έκ³ 
> κ°€λ¥ν• μ‘λ‹µ κ°’ λ©λ΅μ€ λ‹¤μ κ³µμ‹ λ©”λ‰΄μ–Όμ—μ„ ν™•μΈν•  μ μλ‹¤.
> https://docs.spring.io/spring-framework/docs/current/reference/html/web.html#mvc-annreturn-types
HTTP λ©”μ‹μ§€ μ»¨λ²„ν„°
HTTP λ©”μ‹μ§€ μ»¨λ²„ν„° μ„μΉ
HTTP λ©”μ‹μ§€ μ»¨λ²„ν„°λ” μ–΄λ””μ―¤ μμ„κΉ?
HTTP λ©”μ‹μ§€ μ»¨λ²„ν„°λ¥Ό μ‚¬μ©ν•λ” @RequestBody λ„ μ»¨νΈλ΅¤λ¬κ°€ ν•„μ”λ΅ ν•λ” νλΌλ―Έν„°μ κ°’μ— μ‚¬μ©λλ‹¤.
@ResponseBody μ κ²½μ°λ„ μ»¨νΈλ΅¤λ¬μ λ°ν™ κ°’μ„ μ΄μ©ν•λ‹¤.
μ”μ²­μ κ²½μ° @RequestBody λ¥Ό μ²λ¦¬ν•λ” ArgumentResolver κ°€ μκ³ , HttpEntity λ¥Ό μ²λ¦¬ν•λ”
ArgumentResolver κ°€ μλ‹¤. μ΄ ArgumentResolver λ“¤μ΄ HTTP λ©”μ‹μ§€ μ»¨λ²„ν„°λ¥Ό μ‚¬μ©ν•΄μ„ ν•„μ”ν•
κ°μ²΄λ¥Ό μƒμ„±ν•λ” κ²ƒμ΄λ‹¤. (μ–΄λ–¤ μΆ…λ¥κ°€ μλ”μ§€ μ½”λ“λ΅ μ‚΄μ§ ν™•μΈν•΄λ³΄μ)
μ‘λ‹µμ κ²½μ° @ResponseBody μ™€ HttpEntity λ¥Ό μ²λ¦¬ν•λ” ReturnValueHandler κ°€ μλ‹¤. κ·Έλ¦¬κ³ 
μ—¬κΈ°μ—μ„ HTTP λ©”μ‹μ§€ μ»¨λ²„ν„°λ¥Ό νΈμ¶ν•΄μ„ μ‘λ‹µ κ²°κ³Όλ¥Ό λ§λ“ λ‹¤.
μ¤ν”„λ§ MVCλ” @RequestBody @ResponseBody κ°€ μμΌλ©΄
RequestResponseBodyMethodProcessor (ArgumentResolver)
HttpEntity κ°€ μμΌλ©΄ HttpEntityMethodProcessor (ArgumentResolver)λ¥Ό μ‚¬μ©ν•λ‹¤.
> μ°Έκ³ 
> HttpMessageConverter λ¥Ό κµ¬ν„ν• ν΄λμ¤λ¥Ό ν•λ² ν™•μΈν•΄λ³΄μ.
ν™•μ¥
μ¤ν”„λ§μ€ λ‹¤μμ„ λ¨λ‘ μΈν„°νμ΄μ¤λ΅ μ κ³µν•λ‹¤. λ”°λΌμ„ ν•„μ”ν•λ©΄ μ–Έμ λ“ μ§€ κΈ°λ¥μ„ ν™•μ¥ν•  μ μλ‹¤.
HandlerMethodArgumentResolver
HandlerMethodReturnValueHandler
HttpMessageConverter
μ¤ν”„λ§μ΄ ν•„μ”ν• λ€λ¶€λ¶„μ κΈ°λ¥μ„ μ κ³µν•κΈ° λ•λ¬Έμ— μ‹¤μ  κΈ°λ¥μ„ ν™•μ¥ν•  μΌμ΄ λ§μ§€λ” μ•λ‹¤. κΈ°λ¥ ν™•μ¥μ€
WebMvcConfigurer λ¥Ό μƒμ† λ°›μ•„μ„ μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅ν•λ©΄ λλ‹¤. μ‹¤μ  μμ£Ό μ‚¬μ©ν•μ§€λ” μ•μΌλ‹ μ‹¤μ  κΈ°λ¥
ν™•μ¥μ΄ ν•„μ”ν•  λ• WebMvcConfigurer λ¥Ό κ²€μƒ‰ν•΄λ³΄μ.
